@model List<tblQuestion>
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayoutcshtml.cshtml";
}
<!-- Content Header (Page header) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<section class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1>Scholarship Details</h1>
            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item"><a href=@Url.Action("Index","AdminDashbord")>Home</a></li>
                    <li class="breadcrumb-item active">Scholarship Details</li>
                </ol>
            </div>
        </div>
    </div><!-- /.container-fluid -->
</section>

<!-- Main content -->
<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header pull-right">
                        <a class="btn btn-primary float-right" href=@Url.Action("Add","ADQuestion")><i class="fas fa-plus"></i> Add Scholarship</a>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body">
                        <div class="form-group row">
                            <div class="col-xl-3 col-md-4">
                                <label for="validationCustom0"><span>*</span>Standard</label>
                            </div>

                            <div class="col-xl-8 col-md-7">
                                <select id="ddlstandard" name="StandrdList">
                                    <option value="">Select standard</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                </select>
                            </div>
                        </div>
                        <table id="example1" class="table table-bordered table-striped">
                            <thead>
                                <tr>
                                    @*<th>Id</th>*@
                                    <th>Standard</th>
                                    <th>Question</th>
                                    <th>Option A</th>
                                    <th>Option B</th>
                                    <th>Option C</th>
                                    <th>Option D</th>
                                    <th>Correct Answer</th>
                                    <th>Edit</th>
                                    <th>Delete</th>
                                </tr>
                            </thead>
                            <tbody class="tbody">
                            </tbody>

                        </table>
                    </div>
                    <!-- /.card-body -->
                </div>
            </div>
        </div>
    </div>

</section>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h4 class="modal-title" id="myModalLabel">Edit</h4>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="Id">ID</label>
                        <input type="text" class="form-control" id="ID" placeholder="Id" style="display:none;" />
                    </div> 
                    <div class="form-group">
                        <label for="Id">Standard</label>
                        <input type="text" class="form-control" id="Standard" placeholder="Standard" disabled="disabled" />
                    </div>
                    <div class="form-group">
                        <label for="Name">Question</label>
                        <input type="text" class="form-control" id="Question" placeholder="Question" />
                    </div>
                    <div class="form-group">
                        <label for="Age">OptionA</label>
                        <input type="text" class="form-control" id="OptionA" placeholder="OptionA" />
                    </div>
                    <div class="form-group">
                        <label for="State">OptionB</label>
                        <input type="text" class="form-control" id="OptionB" placeholder="OptionB" />
                    </div>
                    <div class="form-group">
                        <label for="Country">OptionC</label>
                        <input type="text" class="form-control" id="OptionC" placeholder="OptionC" />
                    </div>
                    <div class="form-group">
                        <label for="Country">OptionD</label>
                        <input type="text" class="form-control" id="OptionD" placeholder="OptionD" />
                    </div>
                    <div class="form-group">
                        <label for="Country">CorrectAnswer</label>
                        <input type="text" class="form-control" id="CorrectAns" placeholder="CorrectAns" />
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                
                <button type="button" class="btn btn-primary" id="btnUpdate" style="display:none;" onclick="Update();">Update</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<!-- /.content -->
<script>
    $('#ddlstandard').change(function () {
        var id = $(this).val();
        $.ajax({
            url:  "@Url.Action("GetQuestiondata", "ADQuestion")",
            data: { id: id },
            datatype: "json",
            traditional: true,
            success: function (result) {

                var html = '';
                $.each(result, function (key, item) {
                    console.log(item);
                    html += '<tr>';
                    html += '<td style:"display:none">' + item.Id + '</td>';
                    html += '<td>' + item.Standard + '</td>';
                    html += '<td>' + item.Question + '</td>';
                    html += '<td>' + item.OptionA + '</td>';
                    html += '<td>' + item.OptionB + '</td>';
                    html += '<td>' + item.OptionC + '</td>';
                    html += '<td>' + item.OptionD + '</td>';
                    html += '<td>' + item.CorrectAns + '</td>';
                    html += '<td><a href="#" onclick="return getbyID(' + item.Id + ')">Edit</a> | <a href="#" onclick="Delele(' + item.Id + ')">Delete</a></td>';
                    html += '</tr>';
                });
                $('.tbody').html(html);
                //$('.tbody').html(html);
                //for (var i = 0; i < result.length; i++) {
                //    tr = $('<tr/>');
                //    tr.append("<td>" + result[i].Id + "</td>");
                //    tr.append("<td>" + result[i].Standard + "</td>");
                //    tr.append("<td>" + result[i].Question + "</td>");
                //    tr.append("<td>" + result[i].OptionA + "</td>");
                //    tr.append("<td>" + result[i].OptionB + "</td>");
                //    tr.append("<td>" + result[i].OptionC + "</td>");
                //    tr.append("<td>" + result[i].OptionD + "</td>");
                //    tr.append("<td>" + result[i].CorrectAns + "</td>");
                //    tr.append("<td>" + result[i].OptionA + "</td>");
                //    tr.append("<td>" + result[i].OptionA + "</td>");

                //    $('table').append(tr);
                //}

            }
        });
    });



    //Function for getting the Data Based upon Employee ID
    function getbyID(ID) {
        $('#Question').css('border-color', 'lightgrey');
        $('#OptionA').css('border-color', 'lightgrey');
        $('#OptionB').css('border-color', 'lightgrey');
        $('#OptionC').css('border-color', 'lightgrey');
        $('#OptionD').css('border-color', 'lightgrey');
        $('#CorrectAnswer').css('border-color', 'lightgrey');
        $.ajax({
            url: "/ADQuestion/getbyID/" + ID,
            typr: "GET",
            contentType: "application/json;charset=UTF-8",
            dataType: "json",
            success: function (result) {
                console.log(result);
                $('#ID').val(result.Id);
                $('#CorrectAns').val(result.CorrectAns);
                $('#Question').val(result.Question);
                $('#OptionA').val(result.OptionA);
                $('#OptionB').val(result.OptionB);
                $('#OptionC').val(result.OptionC);
                $('#OptionD').val(result.OptionD);
                $('#CorrectAns').val(result.CorrectAns);
                $('#myModal').modal('show');
                $('#btnUpdate').show();
                $('#btnAdd').hide();
            },
            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });
        return false;
    }

    //function for updating employee's record
    function Update() {
         
        var model = {
            Id: $('#ID').val(),
            Question: $('#Question').val(),
            OptionA: $('#OptionA').val(),
            OptionB: $('#OptionB').val(),
            OptionC: $('#OptionC').val(),
            OptionD: $('#OptionD').val(),
            CorrectAns: $('#CorrectAns').val(),
        };
        $.ajax({
            url: "/ADQuestion/Update",
            data: JSON.stringify(model),
            type: "POST",
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function (result) {
                //loadData();
                $('#myModal').modal('hide');
                $('#Question').val("");
                $('#OptionA').val("");
                $('#OptionB').val("");
                $('#OptionC').val("");
                $('#OptionD').val("");
                $('#Standard').val("");
                $('#CorrectAns').val("");
            },
            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });
    }

    //function for deleting employee's record
    function Delele(ID) {
        var ans = confirm("Are you sure you want to delete this Record?");
        if (ans) {
            $.ajax({
                url: "/ADQuestion/Delete/" + ID,
                type: "POST",
                contentType: "application/json;charset=UTF-8",
                dataType: "json",
                success: function (result) {
                    loadData();
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                }
            });
        }
    }

</script>